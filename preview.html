<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ESP32 IoT Monitor — Preview</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --bg: #0f1419;
      --surface: #1a2332;
      --border: #2d3a4d;
      --text: #e6edf3;
      --text-muted: #8b949e;
      --accent: #58a6ff;
      --accent-green: #3fb950;
      --accent-orange: #d29922;
      --accent-red: #f85149;
    }
    * { box-sizing: border-box; }
    body {
      font-family: 'Outfit', sans-serif;
      background: var(--bg);
      color: var(--text);
      margin: 0;
      padding: 24px;
      min-height: 100vh;
    }
    .banner {
      background: rgba(210,153,34,.15);
      border: 1px solid var(--accent-orange);
      border-radius: 8px;
      padding: 12px 16px;
      margin-bottom: 20px;
      font-size: 0.9rem;
      color: var(--accent-orange);
    }
    .container { max-width: 720px; margin: 0 auto; }
    h1 {
      font-size: 1.75rem;
      font-weight: 700;
      margin-bottom: 24px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    h1::before {
      content: '';
      width: 8px;
      height: 28px;
      background: linear-gradient(180deg, var(--accent), var(--accent-green));
      border-radius: 4px;
    }
    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--accent-green);
      animation: pulse 2s infinite;
    }
    @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:.5} }
    .cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 16px;
      margin-bottom: 24px;
    }
    .card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
    }
    .card-title {
      font-size: 0.8rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 8px;
    }
    .card-value {
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.75rem;
      font-weight: 600;
    }
    .card-unit { font-size: 0.9rem; color: var(--text-muted); }
    .badge {
      display: inline-block;
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
    }
    .badge-safe { background: rgba(63,185,80,.2); color: var(--accent-green); }
    .badge-danger { background: rgba(248,81,73,.2); color: var(--accent-red); }
    .chart-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 24px;
    }
    .chart-card h3 {
      font-size: 1rem;
      font-weight: 600;
      margin: 0 0 16px 0;
      color: var(--text-muted);
    }
    .chart-wrap { height: 200px; position: relative; }
    .controls {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 24px;
    }
    .controls h3 {
      font-size: 1rem;
      font-weight: 600;
      margin: 0 0 20px 0;
      color: var(--text-muted);
    }
    .gpio-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 0;
      border-bottom: 1px solid var(--border);
    }
    .gpio-row:last-of-type { border-bottom: none; }
    .gpio-label { font-family: 'JetBrains Mono', monospace; font-size: 0.9rem; }
    .btn {
      display: inline-block;
      padding: 10px 24px;
      border-radius: 8px;
      font-family: 'Outfit', sans-serif;
      font-size: 0.9rem;
      font-weight: 600;
      text-decoration: none;
      cursor: pointer;
      border: none;
      transition: transform .15s, opacity .15s;
    }
    .btn:hover { opacity: .9; transform: translateY(-1px); }
    .btn-on { background: var(--accent-green); color: #0d1117; }
    .btn-off { background: var(--border); color: var(--text); margin-left: 8px; }
  </style>
</head>
<body>
  <div class="container">
    <div class="banner">Preview mode — using simulated sensor data (no ESP32 connected)</div>

    <h1><span class="status-dot"></span> ESP32 IoT Monitor</h1>

    <div class="cards">
      <div class="card">
        <div class="card-title">Temperature</div>
        <div class="card-value"><span id="temp">--</span><span class="card-unit"> °C</span></div>
      </div>
      <div class="card">
        <div class="card-title">Humidity</div>
        <div class="card-value"><span id="hum">--</span><span class="card-unit"> %</span></div>
      </div>
      <div class="card">
        <div class="card-title">Gas Sensor</div>
        <div><span id="gas" class="badge badge-safe">SAFE</span></div>
      </div>
    </div>

    <div class="chart-card">
      <h3>Live Readings</h3>
      <div class="chart-wrap"><canvas id="chart"></canvas></div>
    </div>

    <div class="controls">
      <h3>Output Control</h3>
      <div class="gpio-row">
        <span class="gpio-label">GPIO 26</span>
        <span>
          <button class="btn btn-on" onclick="alert('With ESP32: would turn GPIO 26 ON')">ON</button>
          <button class="btn btn-off" onclick="alert('With ESP32: would turn GPIO 26 OFF')">OFF</button>
        </span>
      </div>
      <div class="gpio-row">
        <span class="gpio-label">GPIO 27</span>
        <span>
          <button class="btn btn-on" onclick="alert('With ESP32: would turn GPIO 27 ON')">ON</button>
          <button class="btn btn-off" onclick="alert('With ESP32: would turn GPIO 27 OFF')">OFF</button>
        </span>
      </div>
    </div>
  </div>

  <script>
  const ctx = document.getElementById('chart').getContext('2d');
  const tempGrad = ctx.createLinearGradient(0,0,0,200);
  tempGrad.addColorStop(0,'rgba(248,81,73,.3)');
  tempGrad.addColorStop(1,'rgba(248,81,73,0)');
  const humGrad = ctx.createLinearGradient(0,0,0,200);
  humGrad.addColorStop(0,'rgba(88,166,255,.3)');
  humGrad.addColorStop(1,'rgba(88,166,255,0)');

  const chart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: [],
      datasets: [
        {
          label: 'Temperature (°C)',
          borderColor: '#f85149',
          backgroundColor: tempGrad,
          fill: true,
          data: [],
          tension: 0.35,
          pointRadius: 3,
          pointHoverRadius: 5
        },
        {
          label: 'Humidity (%)',
          borderColor: '#58a6ff',
          backgroundColor: humGrad,
          fill: true,
          data: [],
          tension: 0.35,
          pointRadius: 3,
          pointHoverRadius: 5
        }
      ]
    },
    options: {
      animation: false,
      responsive: true,
      maintainAspectRatio: false,
      interaction: { intersect: false, mode: 'index' },
      plugins: {
        legend: {
          labels: { color: '#8b949e', font: { size: 12 } }
        }
      },
      scales: {
        x: {
          grid: { color: '#2d3a4d' },
          ticks: { color: '#8b949e', maxTicksLimit: 8 }
        },
        y: {
          min: 10,
          max: 90,
          grid: { color: '#2d3a4d' },
          ticks: { color: '#8b949e' }
        }
      }
    }
  });

  function mockData() {
    const t = 20 + Math.random() * 15;
    const h = 40 + Math.random() * 40;
    const gas = Math.random() > 0.9;
    return { temperature: t, humidity: h, gas: gas ? 1 : 0 };
  }

  function updateData() {
    const data = mockData();
    const time = new Date().toLocaleTimeString();

    document.getElementById('temp').textContent = data.temperature.toFixed(1);
    document.getElementById('hum').textContent = data.humidity.toFixed(1);

    const gasEl = document.getElementById('gas');
    gasEl.textContent = data.gas ? 'GAS DETECTED' : 'SAFE';
    gasEl.className = 'badge ' + (data.gas ? 'badge-danger' : 'badge-safe');

    if (chart.data.labels.length > 20) {
      chart.data.labels.shift();
      chart.data.datasets[0].data.shift();
      chart.data.datasets[1].data.shift();
    }
    chart.data.labels.push(time);
    chart.data.datasets[0].data.push(data.temperature);
    chart.data.datasets[1].data.push(data.humidity);
    chart.update('none');
  }

  updateData();
  setInterval(updateData, 2000);
  </script>
</body>
</html>
